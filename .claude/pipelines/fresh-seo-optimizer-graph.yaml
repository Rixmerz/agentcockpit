# Fresh SEO Optimizer Pipeline v1.0
# Revisa y optimiza proyectos Deno Fresh existentes: SEO, accesibilidad, contraste, acentuaciones

metadata:
  name: "Fresh SEO Optimizer"
  description: "Pipeline para revisar y optimizar proyectos Deno Fresh existentes. Mejora SEO, accesibilidad, contraste WCAG y acentuaciones."
  version: "1.0.0"
  type: "graph"
  author: "SpeedRunners"
  architecture: "hybrid-multi-agent"
  agents_required:
    - "web-analyzer"
    - "orchestrator"
    - "seo-specialist"
    - "ui-perfectionist"
    - "fresh-developer"
  mcps_required:
    - "denofreshmcp"
    - "lighthouse"
    - "sequential-thinking"

# =============================================================================
# GLOBAL PROMPT INJECTION
# =============================================================================

global_prompt: |
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  REGLAS OBLIGATORIAS - FRESH SEO OPTIMIZER
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  OBJETIVO: Optimizar proyecto Deno Fresh EXISTENTE (no crear nuevo)

  âŒ PROHIBIDO: deno task dev (DEPRECADO en Fresh 2.x)
  âœ… OBLIGATORIO: deno task build && deno task start

  VERIFICACIONES CRÃTICAS:
  - AcentuaciÃ³n correcta espaÃ±ol (Ã¡, Ã©, Ã­, Ã³, Ãº, Ã±, Ã¼)
  - Contraste WCAG AA (4.5:1 mÃ­nimo para texto normal)
  - Un solo H1 por pÃ¡gina
  - Alt text en TODAS las imÃ¡genes
  - Meta tags completos

  PRESERVAR:
  - Estructura existente del proyecto
  - LÃ³gica de negocio
  - Datos originales (precios, nombres, etc.)
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# =============================================================================
# NODES - Fases del proceso de optimizaciÃ³n
# =============================================================================

nodes:
  # ---------------------------------------------------------------------------
  # FASE 1: ANÃLISIS DEL PROYECTO EXISTENTE
  # ---------------------------------------------------------------------------

  - id: "project-scan"
    name: "Escaneo del Proyecto"
    is_start: true
    model: haiku
    max_visits: 3
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Identificar proyecto Fresh a optimizar
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      RECOPILAR:
      1. Ruta del proyecto Fresh existente
      2. Â¿Proyecto corriendo? (verificar localhost:8000)
      3. Idioma principal (es/en)
      4. PaÃ­s target (para pÃ¡ginas legales)
      5. Ãreas prioritarias (SEO, accesibilidad, contenido, todo)

      VALIDAR QUE EXISTE:
      - deno.json o deno.jsonc
      - routes/ directory
      - fresh.gen.ts o fresh.config.ts

      SEÃ‘AL DE COMPLETADO: "proyecto identificado"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "structure-analysis"
    name: "AnÃ¡lisis de Estructura"
    model: sonnet
    max_visits: 5
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Analizar estructura completa del proyecto Fresh
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `web-analyzer`**

      ANALIZAR:

      1. RUTAS Y PÃGINAS:
         - Listar todas las routes/*.tsx
         - Identificar layouts (_app.tsx, _layout.tsx)
         - PÃ¡ginas de error (_404.tsx, _500.tsx)

      2. COMPONENTES:
         - components/*.tsx
         - islands/*.tsx (interactivos)

      3. SEO ACTUAL:
         - Meta tags existentes
         - Open Graph
         - Schema.org (JSON-LD)
         - sitemap.xml, robots.txt

      4. CONTENIDO:
         - Textos principales
         - Headings (H1, H2, H3)
         - ImÃ¡genes y alt texts

      FORMATO DE SALIDA:
      ```
      ESTRUCTURA DEL PROYECTO
      â”œâ”€â”€ Routes: X pÃ¡ginas
      â”œâ”€â”€ Components: X
      â”œâ”€â”€ Islands: X
      â”œâ”€â”€ SEO: [completo/parcial/ausente]
      â””â”€â”€ Contenido: [analizado]
      ```

      SEÃ‘AL DE COMPLETADO: "estructura analizada"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "lighthouse-initial"
    name: "Lighthouse Inicial"
    model: sonnet
    max_visits: 5
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Ejecutar auditorÃ­a Lighthouse del estado actual
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `web-analyzer`**

      PREREQUISITO: Servidor corriendo (deno task build && deno task start)

      EJECUTAR:
      1. Buscar herramienta: mcp__pipeline-manager__search_tools(query="lighthouse")
      2. Ejecutar auditorÃ­a en http://localhost:8000

      DOCUMENTAR BASELINE:
      | MÃ©trica        | Score Actual | Target | Gap |
      |----------------|--------------|--------|-----|
      | Performance    |      ??      |  >90   |     |
      | Accessibility  |      ??      |  >95   |     |
      | Best Practices |      ??      |  >95   |     |
      | SEO            |      ??      |  >95   |     |

      LISTAR TOP 5 ISSUES por categorÃ­a.

      SEÃ‘AL DE COMPLETADO: "baseline lighthouse documentado"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 2: ANÃLISIS DE CONTENIDO Y ACENTUACIÃ“N
  # ---------------------------------------------------------------------------

  - id: "content-audit"
    name: "AuditorÃ­a de Contenido"
    model: sonnet
    max_visits: 10
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Revisar contenido textual y acentuaciÃ³n
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `seo-specialist`**

      REVISAR EN CADA ARCHIVO .tsx:

      1. ACENTUACIÃ“N ESPAÃ‘OL:
         â–¡ Palabras comunes mal acentuadas
         â–¡ "mas" vs "mÃ¡s", "solo" vs "sÃ³lo"
         â–¡ Tildes en mayÃºsculas (Ã, Ã‰, Ã, Ã“, Ãš)
         â–¡ Ã‘ correcta (no "n")

      2. HEADINGS:
         â–¡ Â¿H1 Ãºnico por pÃ¡gina?
         â–¡ Â¿JerarquÃ­a correcta? (H1 > H2 > H3)
         â–¡ Â¿Keywords en headings?

      3. TEXTOS SEO:
         â–¡ Densidad de keywords
         â–¡ Longitud de pÃ¡rrafos
         â–¡ CTAs claros

      4. ALT TEXTS:
         â–¡ Â¿Todas las imÃ¡genes tienen alt?
         â–¡ Â¿Alt descriptivo y con keywords?

      FORMATO:
      ```
      ISSUES DE CONTENIDO ENCONTRADOS
      ================================
      ğŸ”´ CRÃTICOS (afectan SEO/accesibilidad):
      - [archivo:lÃ­nea] descripciÃ³n

      ğŸŸ¡ IMPORTANTES:
      - [archivo:lÃ­nea] descripciÃ³n

      ğŸŸ¢ MENORES:
      - [archivo:lÃ­nea] descripciÃ³n
      ```

      SEÃ‘AL DE COMPLETADO: "auditorÃ­a de contenido completada"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 3: PLANIFICACIÃ“N DE MEJORAS
  # ---------------------------------------------------------------------------

  - id: "optimization-plan"
    name: "Plan de OptimizaciÃ³n"
    model: opus
    max_visits: 3
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Crear plan de optimizaciÃ³n priorizado
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `orchestrator`**

      El subagente debe usar sequential-thinking para:
      - Sintetizar todos los hallazgos
      - Priorizar por impacto en scores
      - Crear plan ejecutable

      PLAN DEBE INCLUIR:

      1. CORRECCIONES INMEDIATAS (impacto alto):
         - Acentuaciones crÃ­ticas
         - H1 duplicados
         - Alt texts faltantes
         - Meta tags ausentes

      2. MEJORAS SEO TÃ‰CNICO:
         - Schema.org a aÃ±adir/mejorar
         - Open Graph completo
         - Twitter Cards
         - sitemap.xml / robots.txt

      3. ACCESIBILIDAD:
         - Issues de contraste
         - Focus states
         - ARIA labels

      4. OPTIMIZACIONES:
         - Performance (lazy loading, preload)
         - Best Practices

      FORMATO DEL PLAN:
      | Prioridad | Tarea | Archivo(s) | Impacto Estimado |
      |-----------|-------|------------|------------------|

      SEÃ‘AL DE COMPLETADO: "plan de optimizaciÃ³n creado"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 4: CORRECCIONES DE CONTENIDO
  # ---------------------------------------------------------------------------

  - id: "content-fixes"
    name: "Corregir Contenido"
    model: sonnet
    max_visits: 20
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Aplicar correcciones de contenido segÃºn el plan
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `seo-specialist`**

      CORREGIR EN ORDEN:

      1. ACENTUACIONES:
         - Buscar y reemplazar palabras mal acentuadas
         - Verificar cada archivo .tsx

      2. HEADINGS:
         - Asegurar H1 Ãºnico por pÃ¡gina
         - Corregir jerarquÃ­a si estÃ¡ rota

      3. ALT TEXTS:
         - AÃ±adir alt descriptivos a imÃ¡genes sin alt
         - Mejorar alt genÃ©ricos ("imagen", "foto")

      4. TEXTOS SEO:
         - Optimizar titles (50-60 chars)
         - Optimizar descriptions (150-160 chars)

      VERIFICAR despuÃ©s de cada correcciÃ³n.

      SEÃ‘AL DE COMPLETADO: "contenido corregido"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 5: SEO TÃ‰CNICO
  # ---------------------------------------------------------------------------

  - id: "seo-technical"
    name: "SEO TÃ©cnico"
    model: sonnet
    max_visits: 15
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Implementar/mejorar SEO tÃ©cnico
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `seo-specialist`**

      USAR HERRAMIENTAS MCP (buscar primero):
      - fresh_generate_sitemap
      - fresh_generate_robots
      - fresh_add_schema
      - og_validator

      CHECKLIST:

      â–¡ META TAGS:
        - Title optimizado cada pÃ¡gina
        - Description Ãºnica cada pÃ¡gina
        - Canonical URLs

      â–¡ OPEN GRAPH:
        - og:title, og:description
        - og:image (1200x630)
        - og:type, og:url

      â–¡ TWITTER CARDS:
        - twitter:card
        - twitter:title, twitter:description
        - twitter:image

      â–¡ SCHEMA.ORG (JSON-LD):
        - Organization
        - WebSite con SearchAction
        - Product (si aplica)
        - FAQPage (si hay FAQ)
        - BreadcrumbList

      â–¡ ARCHIVOS:
        - sitemap.xml actualizado
        - robots.txt correcto

      SEÃ‘AL DE COMPLETADO: "seo tÃ©cnico implementado"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 6: ACCESIBILIDAD Y CONTRASTE
  # ---------------------------------------------------------------------------

  - id: "accessibility-check"
    name: "Verificar Accesibilidad"
    model: sonnet
    max_visits: 10
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Auditar y corregir accesibilidad WCAG 2.1 AA
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `ui-perfectionist`**

      USAR: fresh_contrast_check para verificar colores

      CHECKLIST WCAG:

      â–¡ CONTRASTE:
        - Texto normal: ratio â‰¥ 4.5:1
        - Texto grande (18px+): ratio â‰¥ 3:1
        - Iconos/elementos UI: ratio â‰¥ 3:1

      â–¡ NAVEGACIÃ“N:
        - Skip link presente
        - Focus visible en todos los elementos interactivos
        - Tab order lÃ³gico

      â–¡ FORMULARIOS:
        - Labels asociados a inputs
        - Error messages accesibles
        - Required fields indicados

      â–¡ ARIA:
        - Landmarks (nav, main, footer)
        - Live regions para contenido dinÃ¡mico
        - aria-label donde necesario

      â–¡ IMÃGENES:
        - alt="" para decorativas
        - alt descriptivo para informativas

      SEÃ‘ALES:
      - Si hay issues â†’ "accesibilidad requiere correcciones"
      - Si todo ok â†’ "accesibilidad verificada"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "accessibility-fixes"
    name: "Corregir Accesibilidad"
    model: sonnet
    max_visits: 15
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Aplicar correcciones de accesibilidad
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `ui-perfectionist`**

      CORREGIR POR PRIORIDAD:

      1. CONTRASTE (mÃ¡s impacto en score):
         - Ajustar colores de texto
         - Ajustar colores de fondo
         - Verificar con fresh_contrast_check

      2. FOCUS STATES:
         - AÃ±adir outline visible
         - Usar focus-visible para mejor UX

      3. SKIP LINK:
         - AÃ±adir si no existe
         - Debe ser primer elemento focusable

      4. ARIA:
         - AÃ±adir roles faltantes
         - AÃ±adir labels faltantes

      SEÃ‘AL DE COMPLETADO: "correcciones de accesibilidad aplicadas"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 7: PÃGINAS TÃ‰CNICAS Y LEGALES
  # ---------------------------------------------------------------------------

  - id: "technical-pages"
    name: "PÃ¡ginas TÃ©cnicas"
    model: sonnet
    max_visits: 10
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Verificar/crear pÃ¡ginas tÃ©cnicas y legales
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `seo-specialist`**

      VERIFICAR/CREAR:

      â–¡ ERROR PAGES:
        - routes/_404.tsx (diseÃ±o consistente)
        - routes/_500.tsx (diseÃ±o consistente)

      â–¡ LEGALES (segÃºn paÃ­s target):
        - /privacidad o /privacy
        - /terminos o /terms
        - /cookies

      â–¡ COOKIE CONSENT:
        - Banner funcional
        - Respeta preferencias
        - Link a polÃ­tica de cookies

      â–¡ FOOTER:
        - Links a pÃ¡ginas legales
        - AÃ±o actual en copyright

      â–¡ FAVICONS:
        - favicon.ico
        - apple-touch-icon.png
        - manifest.json (PWA)

      SEÃ‘AL DE COMPLETADO: "pÃ¡ginas tÃ©cnicas listas"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 8: AUDITORÃA FINAL Y COMPARACIÃ“N
  # ---------------------------------------------------------------------------

  - id: "lighthouse-final"
    name: "Lighthouse Final"
    model: sonnet
    max_visits: 10
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Ejecutar auditorÃ­a Lighthouse final y comparar
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `web-analyzer`**

      PREREQUISITO: Rebuild del proyecto
      ```bash
      deno task build && deno task start
      ```

      EJECUTAR auditorÃ­a en http://localhost:8000

      COMPARAR CON BASELINE:
      | MÃ©trica        | Antes | DespuÃ©s | Cambio | Target | Â¿OK? |
      |----------------|-------|---------|--------|--------|------|
      | Performance    |  ??   |   ??    |  +??   |  >90   |      |
      | Accessibility  |  ??   |   ??    |  +??   |  >95   |      |
      | Best Practices |  ??   |   ??    |  +??   |  >95   |      |
      | SEO            |  ??   |   ??    |  +??   |  >95   |      |

      SEÃ‘ALES:
      - Si TODOS â‰¥ target â†’ "auditorÃ­a aprobada"
      - Si alguno falla â†’ "requiere correcciones adicionales"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "final-fixes"
    name: "Correcciones Finales"
    model: opus
    max_visits: 20
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Resolver issues pendientes para alcanzar targets
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `orchestrator`**

      El subagente debe usar sequential-thinking para:
      - Analizar issues restantes
      - Priorizar por impacto
      - Aplicar correcciones

      DESPUÃ‰S DE CORRECCIONES:
      ```bash
      deno task build && deno task start
      ```

      SEÃ‘AL DE COMPLETADO: "correcciones finales aplicadas"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 9: REPORTE FINAL
  # ---------------------------------------------------------------------------

  - id: "optimization-complete"
    name: "OptimizaciÃ³n Completa"
    is_end: true
    model: haiku
    max_visits: 1
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      PROYECTO OPTIMIZADO - REPORTE FINAL
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `fresh-developer`**

      GENERAR REPORTE:

      1. RESUMEN EJECUTIVO
         - Proyecto: [ruta]
         - Fecha de optimizaciÃ³n
         - Tiempo total

      2. MEJORAS LIGHTHOUSE
         | MÃ©trica        | Antes | DespuÃ©s | Mejora |
         |----------------|-------|---------|--------|
         | Performance    |       |         |   +XX  |
         | Accessibility  |       |         |   +XX  |
         | Best Practices |       |         |   +XX  |
         | SEO            |       |         |   +XX  |

      3. CORRECCIONES APLICADAS
         - Acentuaciones: X corregidas
         - Alt texts: X aÃ±adidos/mejorados
         - Meta tags: X optimizados
         - Schema.org: X aÃ±adidos
         - Contraste: X colores ajustados

      4. ARCHIVOS MODIFICADOS
         - Lista de archivos tocados

      5. PRÃ“XIMOS PASOS RECOMENDADOS
         - Mejoras adicionales opcionales
         - Monitoreo sugerido

      COMANDOS PARA VERIFICAR:
      ```bash
      cd [ruta]
      deno task build && deno task start
      # Abrir http://localhost:8000
      ```
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# =============================================================================
# EDGES - Transiciones entre nodos
# =============================================================================

edges:
  # --- Fase 1: AnÃ¡lisis ---
  - id: "scan-to-structure"
    from: "project-scan"
    to: "structure-analysis"
    condition:
      type: "phrase"
      phrases:
        - "proyecto identificado"
    priority: 1

  - id: "structure-to-lighthouse"
    from: "structure-analysis"
    to: "lighthouse-initial"
    condition:
      type: "phrase"
      phrases:
        - "estructura analizada"
    priority: 1

  - id: "lighthouse-to-content"
    from: "lighthouse-initial"
    to: "content-audit"
    condition:
      type: "phrase"
      phrases:
        - "baseline lighthouse documentado"
    priority: 1

  # --- Fase 2: Contenido ---
  - id: "content-to-plan"
    from: "content-audit"
    to: "optimization-plan"
    condition:
      type: "phrase"
      phrases:
        - "auditorÃ­a de contenido completada"
    priority: 1

  # --- Fase 3: Plan ---
  - id: "plan-to-fixes"
    from: "optimization-plan"
    to: "content-fixes"
    condition:
      type: "phrase"
      phrases:
        - "plan de optimizaciÃ³n creado"
    priority: 1

  # --- Fase 4: Correcciones contenido ---
  - id: "fixes-to-seo"
    from: "content-fixes"
    to: "seo-technical"
    condition:
      type: "phrase"
      phrases:
        - "contenido corregido"
    priority: 1

  # --- Fase 5: SEO TÃ©cnico ---
  - id: "seo-to-accessibility"
    from: "seo-technical"
    to: "accessibility-check"
    condition:
      type: "phrase"
      phrases:
        - "seo tÃ©cnico implementado"
    priority: 1

  # --- Fase 6: Accesibilidad (LOOP) ---
  - id: "accessibility-to-fixes"
    from: "accessibility-check"
    to: "accessibility-fixes"
    condition:
      type: "phrase"
      phrases:
        - "accesibilidad requiere correcciones"
    priority: 1

  - id: "accessibility-fixes-to-check"
    from: "accessibility-fixes"
    to: "accessibility-check"
    condition:
      type: "phrase"
      phrases:
        - "correcciones de accesibilidad aplicadas"
    priority: 1

  - id: "accessibility-to-technical"
    from: "accessibility-check"
    to: "technical-pages"
    condition:
      type: "phrase"
      phrases:
        - "accesibilidad verificada"
    priority: 2

  # --- Fase 7: PÃ¡ginas tÃ©cnicas ---
  - id: "technical-to-lighthouse"
    from: "technical-pages"
    to: "lighthouse-final"
    condition:
      type: "phrase"
      phrases:
        - "pÃ¡ginas tÃ©cnicas listas"
    priority: 1

  # --- Fase 8: AuditorÃ­a Final (LOOP) ---
  - id: "lighthouse-to-fixes"
    from: "lighthouse-final"
    to: "final-fixes"
    condition:
      type: "phrase"
      phrases:
        - "requiere correcciones adicionales"
    priority: 1

  - id: "fixes-to-lighthouse"
    from: "final-fixes"
    to: "lighthouse-final"
    condition:
      type: "phrase"
      phrases:
        - "correcciones finales aplicadas"
    priority: 1

  - id: "lighthouse-to-complete"
    from: "lighthouse-final"
    to: "optimization-complete"
    condition:
      type: "phrase"
      phrases:
        - "auditorÃ­a aprobada"
    priority: 2

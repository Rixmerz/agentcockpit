# DenoFresh Web Analyzer & Rebuild Pipeline v3.2
# Arquitectura hÃ­brida: 7 Subagents especializados + delegaciÃ³n explÃ­cita

metadata:
  name: "DenoFresh Web Analyzer"
  description: "Pipeline hÃ­brida con subagents especializados. Analiza pÃ¡ginas web y las recrea con Deno Fresh."
  version: "3.2.0"
  type: "graph"
  author: "AgentCockpit"
  architecture: "hybrid-multi-agent"
  agents_required:
    - "url-capture"
    - "web-analyzer"
    - "orchestrator"
    - "fresh-developer"
    - "creative-director"
    - "seo-specialist"
    - "ui-perfectionist"
  mcps_required:
    - "denofreshmcp"
    - "lighthouse"
    - "sequential-thinking"

# =============================================================================
# GLOBAL PROMPT INJECTION
# =============================================================================

global_prompt: |
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  REGLAS OBLIGATORIAS - DENO FRESH 2.2.0
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  âŒ PROHIBIDO: deno task dev (DEPRECADO)
  âœ… OBLIGATORIO: deno task build && deno task start

  VERIFICACIONES:
  - AcentuaciÃ³n correcta (Ã¡, Ã©, Ã­, Ã³, Ãº, Ã±, Ã¼)
  - Contraste WCAG AA (4.5:1 mÃ­nimo)
  - Un solo H1 por pÃ¡gina
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# =============================================================================
# NODES - Cada nodo delega explÃ­citamente a un subagente
# =============================================================================

nodes:
  # ---------------------------------------------------------------------------
  # FASE 1: CAPTURA Y ANÃLISIS
  # ---------------------------------------------------------------------------

  - id: "url-capture"
    name: "Captura de URL"
    is_start: true
    model: haiku
    max_visits: 5
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Capturar informaciÃ³n inicial del usuario para anÃ¡lisis web
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `url-capture`**

      INFORMACIÃ“N A RECOPILAR:
      1. URL completa de la pÃ¡gina (https://...)
      2. Ruta donde crear el proyecto Fresh
      3. Idioma del sitio (es/en)
      4. Â¿PropÃ³sito? (copia exacta o versiÃ³n mejorada)
      5. Â¿Contenido a excluir?

      SEÃ‘AL DE COMPLETADO: "url capturada"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "web-analysis"
    name: "AnÃ¡lisis Web Completo"
    model: sonnet
    max_visits: 5
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Analizar pÃ¡gina web original exhaustivamente
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `web-analyzer`**

      EJECUTAR EN ORDEN:

      1. WEBFETCH - Extraer:
         â–¡ Estructura de secciones
         â–¡ Contenido textual (tÃ­tulos, CTAs, pÃ¡rrafos)
         â–¡ Meta tags y SEO actual
         â–¡ Paleta de colores inferida
         â–¡ Keywords para imÃ¡genes Pexels

      2. LIGHTHOUSE ORIGINAL - Documentar scores y issues

      SEÃ‘AL DE COMPLETADO: "anÃ¡lisis completado"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 2: PLANIFICACIÃ“N ESTRATÃ‰GICA
  # ---------------------------------------------------------------------------

  - id: "strategic-planning"
    name: "PlanificaciÃ³n EstratÃ©gica"
    model: opus
    max_visits: 3
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Crear plan de ejecuciÃ³n DEFINITIVO basado en el anÃ¡lisis
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `orchestrator`**

      El subagente debe usar sequential-thinking para:
      - Sintetizar todo el anÃ¡lisis
      - Tomar decisiones estratÃ©gicas
      - Crear plan sin ambigÃ¼edades

      EL PLAN DEBE INCLUIR (todo especÃ­fico):
      1. SECCIONES: Nombre, variante Fresh, contenido exacto
      2. ISLANDS: CuÃ¡les y configuraciÃ³n
      3. IMÃGENES: Query Pexels, orientaciÃ³n, tamaÃ±o
      4. SEO: Title exacto, description exacta, schemas
      5. COLORES: Paleta hex completa
      6. OBJETIVOS: Scores Lighthouse target

      SEÃ‘AL DE COMPLETADO: "sÃ­ntesis completada"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 3: CONSTRUCCIÃ“N
  # ---------------------------------------------------------------------------

  - id: "project-init"
    name: "Inicializar Proyecto"
    model: haiku
    max_visits: 3
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Inicializar proyecto Deno Fresh en la ruta especificada
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `fresh-developer`**

      EJECUTAR:
      - fresh_init_project(project_path="[ruta del plan]")

      RECORDAR:
      âŒ NUNCA usar: deno task dev
      âœ… SIEMPRE usar: deno task build && deno task start

      SEÃ‘AL DE COMPLETADO: "proyecto inicializado"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "sections-creation"
    name: "Crear Secciones"
    model: haiku
    max_visits: 20
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Crear todas las secciones del plan con contenido especÃ­fico
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `fresh-developer`**

      Para CADA secciÃ³n del plan (en orden):
      1. fresh_add_section(project_path, section_name, variant)
      2. Editar con contenido especÃ­fico del plan

      VERIFICAR acentuaciÃ³n en textos espaÃ±ol (Ã¡, Ã©, Ã­, Ã³, Ãº, Ã±).

      SEÃ‘AL DE COMPLETADO: "secciones creadas"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "islands-creation"
    name: "Crear Islands"
    model: haiku
    max_visits: 15
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: AÃ±adir islands interactivos segÃºn el plan
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `fresh-developer`**

      Para CADA island del plan:
      - fresh_add_island(project_path, island_name)

      OBLIGATORIOS: mobile-menu
      RECOMENDADOS: scroll-to-top, cookie-consent

      SEÃ‘AL DE COMPLETADO: "islands creados"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "images-download"
    name: "Descargar ImÃ¡genes"
    model: haiku
    max_visits: 15
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Descargar imÃ¡genes de Pexels segÃºn el plan
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `fresh-developer`**

      1. Verificar API: pexels_api_status()

      2. Para CADA imagen del plan:
         pexels_search_and_download(
           project_path, query, orientation, size, filename
         )

      3. Actualizar referencias: /images/[filename].jpeg

      4. Guardar crÃ©ditos de fotÃ³grafos

      SEÃ‘AL DE COMPLETADO: "imÃ¡genes descargadas"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 4: DIRECCIÃ“N CREATIVA
  # ---------------------------------------------------------------------------

  - id: "creative-direction"
    name: "DirecciÃ³n Creativa"
    model: opus
    max_visits: 5
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Transformar diseÃ±o genÃ©rico en experiencia visual Ãºnica
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `creative-director`**

      CONTEXTO: El sitio tiene estructura y contenido base. Elevar la
      experiencia visual para que NO sea genÃ©rico.

      PROCESO:
      1. ANÃLISIS DE MARCA - Emociones target, personalidad visual
      2. DIRECCIÃ“N VISUAL - Paleta Ãºnica, tipografÃ­a, espaciado
      3. APLICAR CREATIVIDAD - Hero memorable, micro-interacciones
      4. CONSISTENCIA - Todo el sitio respira la misma identidad

      RESTRICCIONES: Mantener contraste WCAG AA (4.5:1)

      SEÃ‘AL DE COMPLETADO: "direcciÃ³n creativa aplicada"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 5: UI REVIEW (con loop)
  # ---------------------------------------------------------------------------

  - id: "ui-review"
    name: "Review UI/UX"
    model: sonnet
    max_visits: 10
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Revisar calidad visual con ojo crÃ­tico experto
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `ui-perfectionist`**

      REVISAR:
      â–¡ Espaciado y ritmo visual
      â–¡ TipografÃ­a y jerarquÃ­a
      â–¡ Colores y contraste
      â–¡ Componentes y CTAs
      â–¡ Responsive/mobile
      â–¡ Microinteracciones

      CRITERIO: "Â¿ImpresionarÃ­a a un cliente exigente?"

      FORMATO:
      - ğŸ”´ CrÃ­tico: debe corregirse
      - ğŸŸ¡ Importante: deberÃ­a corregirse
      - ğŸŸ¢ Menor: nice to have

      SEÃ‘ALES:
      - Si hay crÃ­ticos â†’ "ui requiere mejoras"
      - Si todo ok â†’ "ui review aprobado"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "ui-fixes"
    name: "Correcciones UI"
    model: sonnet
    max_visits: 15
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Aplicar todas las correcciones de UI identificadas
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `ui-perfectionist`**

      ORDEN DE CORRECCIÃ“N:
      1. Issues ğŸ”´ CrÃ­ticos PRIMERO
      2. Issues ğŸŸ¡ Importantes
      3. Issues ğŸŸ¢ Menores si hay tiempo

      Para cada correcciÃ³n:
      - Editar archivo especÃ­fico
      - Verificar que el cambio se aplicÃ³

      SEÃ‘AL DE COMPLETADO: "correcciones ui aplicadas"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 6: SEO Y TÃ‰CNICOS
  # ---------------------------------------------------------------------------

  - id: "seo-implementation"
    name: "Implementar SEO"
    model: sonnet
    max_visits: 15
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Implementar SEO tÃ©cnico completo segÃºn el plan
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `seo-specialist`**

      CHECKLIST:
      â–¡ Meta tags (title, description, canonical)
      â–¡ Open Graph completo
      â–¡ Twitter Cards
      â–¡ Schema.org (JSON-LD)
      â–¡ sitemap.xml
      â–¡ robots.txt
      â–¡ H1 Ãºnico, jerarquÃ­a correcta
      â–¡ Alt text en imÃ¡genes

      HERRAMIENTAS MCP:
      - fresh_generate_sitemap
      - fresh_generate_robots
      - fresh_add_schema
      - og_validator

      SEÃ‘AL DE COMPLETADO: "seo configurado"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "technical-files"
    name: "Archivos TÃ©cnicos"
    model: sonnet
    max_visits: 10
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Crear archivos tÃ©cnicos (404, 500, favicons, manifest)
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `seo-specialist`**

      CREAR:
      â–¡ routes/_404.tsx - PÃ¡gina 404 personalizada
      â–¡ routes/_500.tsx - PÃ¡gina de error
      â–¡ Favicon mÃºltiples tamaÃ±os
      â–¡ manifest.json (PWA)

      SEÃ‘AL DE COMPLETADO: "archivos tÃ©cnicos listos"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "accessibility-legal"
    name: "Accesibilidad y Legal"
    model: sonnet
    max_visits: 10
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Verificar accesibilidad WCAG y crear pÃ¡ginas legales
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `seo-specialist`**

      ACCESIBILIDAD (WCAG 2.1 AA):
      â–¡ Contraste verificado (fresh_contrast_check)
      â–¡ Labels en inputs
      â–¡ Focus visible
      â–¡ Skip link
      â–¡ ARIA donde necesario

      LEGAL:
      â–¡ /privacy - PolÃ­tica de Privacidad
      â–¡ /cookies - PolÃ­tica de Cookies
      â–¡ Cookie consent funcional
      â–¡ Links en footer

      SEÃ‘AL DE COMPLETADO: "accesibilidad y legal listos"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 7: AUDITORÃA Y CORRECCIONES (con loop)
  # ---------------------------------------------------------------------------

  - id: "lighthouse-audit"
    name: "AuditorÃ­a Lighthouse"
    model: sonnet
    max_visits: 10
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Ejecutar auditorÃ­a Lighthouse y comparar con original
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `web-analyzer`**

      PREREQUISITO: Servidor corriendo (deno task build && deno task start)

      EJECUTAR auditorÃ­a en http://localhost:8000

      COMPARAR:
      | MÃ©trica        | Original | Nueva | Target | Â¿OK? |
      |----------------|----------|-------|--------|------|
      | Performance    |    ??    |  ??   |  >90   |      |
      | Accessibility  |    ??    |  ??   |  >95   |      |
      | Best Practices |    ??    |  ??   |  >95   |      |
      | SEO            |    ??    |  ??   |  >95   |      |

      SEÃ‘ALES:
      - Si TODOS â‰¥ target â†’ "auditorÃ­a aprobada"
      - Si alguno falla â†’ "requiere correcciones"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "lighthouse-fixes"
    name: "Correcciones Lighthouse"
    model: opus
    max_visits: 20
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: Resolver issues de Lighthouse para alcanzar targets
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `orchestrator`**

      El subagente debe usar sequential-thinking para analizar y corregir.

      CORREGIR POR CATEGORÃA:

      PERFORMANCE:
      â–¡ Optimizar imÃ¡genes (WebP, lazy loading)
      â–¡ Preload recursos crÃ­ticos

      ACCESSIBILITY:
      â–¡ Corregir contraste
      â–¡ AÃ±adir labels faltantes

      BEST PRACTICES:
      â–¡ Sin errores consola
      â–¡ Images con aspect ratio

      SEO:
      â–¡ Meta tags faltantes
      â–¡ Alt text

      DESPUÃ‰S: deno task build && deno task start

      SEÃ‘AL DE COMPLETADO: "correcciones aplicadas"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # ---------------------------------------------------------------------------
  # FASE 8: REVIEW FINAL
  # ---------------------------------------------------------------------------

  - id: "final-review"
    name: "Review Final"
    model: opus
    max_visits: 5
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      TAREA: ValidaciÃ³n final completa del proyecto
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `orchestrator`**

      El subagente debe usar sequential-thinking para review final.

      CHECKLIST:
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ LIGHTHOUSE: Performance â‰¥90, Accessibility â‰¥95, BP â‰¥95, SEO â‰¥95        â”‚
      â”‚ SEO: sitemap.xml, robots.txt, Schema.org, Open Graph                   â”‚
      â”‚ UI/UX: Review aprobado, responsive, imÃ¡genes de calidad                â”‚
      â”‚ LEGAL: Privacidad, Cookie consent                                      â”‚
      â”‚ ERROR PAGES: 404, 500 personalizadas                                   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

      SEÃ‘ALES:
      - Si TODO ok â†’ "review aprobado"
      - Si falta algo â†’ "requiere mÃ¡s trabajo"
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "deployment-ready"
    name: "Listo para Deploy"
    is_end: true
    model: haiku
    max_visits: 1
    prompt_injection: |
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      PROYECTO COMPLETADO - RESUMEN FINAL
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      **OBLIGATORIO: Delega esta tarea al subagente `fresh-developer`**

      GENERAR RESUMEN:
      1. URL Original analizada
      2. Proyecto creado en [ruta]
      3. Secciones implementadas
      4. Islands aÃ±adidos
      5. ImÃ¡genes Pexels (con crÃ©ditos)

      COMPARACIÃ“N LIGHTHOUSE:
      | MÃ©trica | Original | Final | Mejora |

      COMANDOS PARA EJECUTAR:
      cd [ruta]
      deno task build && deno task start
      â†’ http://localhost:8000

      DEPLOY: Deno Deploy (https://dash.deno.com)
      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# =============================================================================
# EDGES - Transiciones con loops
# =============================================================================

edges:
  # --- Fase 1: Captura y AnÃ¡lisis ---
  - id: "capture-to-analysis"
    from: "url-capture"
    to: "web-analysis"
    condition:
      type: "phrase"
      phrases:
        - "url capturada"
    priority: 1

  - id: "analysis-to-planning"
    from: "web-analysis"
    to: "strategic-planning"
    condition:
      type: "phrase"
      phrases:
        - "anÃ¡lisis completado"
    priority: 1

  # --- Fase 2: PlanificaciÃ³n ---
  - id: "planning-to-init"
    from: "strategic-planning"
    to: "project-init"
    condition:
      type: "phrase"
      phrases:
        - "sÃ­ntesis completada"
    priority: 1

  # --- Fase 3: ConstrucciÃ³n ---
  - id: "init-to-sections"
    from: "project-init"
    to: "sections-creation"
    condition:
      type: "phrase"
      phrases:
        - "proyecto inicializado"
    priority: 1

  - id: "sections-to-islands"
    from: "sections-creation"
    to: "islands-creation"
    condition:
      type: "phrase"
      phrases:
        - "secciones creadas"
    priority: 1

  - id: "islands-to-images"
    from: "islands-creation"
    to: "images-download"
    condition:
      type: "phrase"
      phrases:
        - "islands creados"
    priority: 1

  # --- Fase 4: DirecciÃ³n Creativa ---
  - id: "images-to-creative"
    from: "images-download"
    to: "creative-direction"
    condition:
      type: "phrase"
      phrases:
        - "imÃ¡genes descargadas"
    priority: 1

  - id: "creative-to-ui-review"
    from: "creative-direction"
    to: "ui-review"
    condition:
      type: "phrase"
      phrases:
        - "direcciÃ³n creativa aplicada"
    priority: 1

  # --- Fase 5: UI Review (LOOP) ---
  - id: "ui-review-to-fixes"
    from: "ui-review"
    to: "ui-fixes"
    condition:
      type: "phrase"
      phrases:
        - "ui requiere mejoras"
    priority: 1

  - id: "ui-fixes-to-review"
    from: "ui-fixes"
    to: "ui-review"
    condition:
      type: "phrase"
      phrases:
        - "correcciones ui aplicadas"
    priority: 1

  - id: "ui-review-to-seo"
    from: "ui-review"
    to: "seo-implementation"
    condition:
      type: "phrase"
      phrases:
        - "ui review aprobado"
    priority: 2

  # --- Fase 6: SEO y TÃ©cnicos ---
  - id: "seo-to-technical"
    from: "seo-implementation"
    to: "technical-files"
    condition:
      type: "phrase"
      phrases:
        - "seo configurado"
    priority: 1

  - id: "technical-to-accessibility"
    from: "technical-files"
    to: "accessibility-legal"
    condition:
      type: "phrase"
      phrases:
        - "archivos tÃ©cnicos listos"
    priority: 1

  # --- Fase 7: AuditorÃ­a (LOOP) ---
  - id: "accessibility-to-audit"
    from: "accessibility-legal"
    to: "lighthouse-audit"
    condition:
      type: "phrase"
      phrases:
        - "accesibilidad y legal listos"
    priority: 1

  - id: "audit-to-fixes"
    from: "lighthouse-audit"
    to: "lighthouse-fixes"
    condition:
      type: "phrase"
      phrases:
        - "requiere correcciones"
    priority: 1

  - id: "fixes-to-audit"
    from: "lighthouse-fixes"
    to: "lighthouse-audit"
    condition:
      type: "phrase"
      phrases:
        - "correcciones aplicadas"
    priority: 1

  - id: "audit-to-review"
    from: "lighthouse-audit"
    to: "final-review"
    condition:
      type: "phrase"
      phrases:
        - "auditorÃ­a aprobada"
    priority: 2

  # --- Fase 8: Final ---
  - id: "review-to-fixes"
    from: "final-review"
    to: "lighthouse-fixes"
    condition:
      type: "phrase"
      phrases:
        - "requiere mÃ¡s trabajo"
    priority: 1

  - id: "review-to-complete"
    from: "final-review"
    to: "deployment-ready"
    condition:
      type: "phrase"
      phrases:
        - "review aprobado"
    priority: 2
